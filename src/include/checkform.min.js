String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};function checkCreateProfileInfo(h){h.ksCsrq.value=h.year.value+"-"+h.month.value+"-"+h.day.value;puredigit=new RegExp("[０-９Ａ-Ｚａ-ｚ，。？＠　－＿＋－＊＼／［］｛｝；：＂＇︿“～！＃％”]");if((puredigit.test(h.ksPXing.value))||(puredigit.test(h.ksPMing.value))||(puredigit.test(h.ksIDNO.value))||(puredigit.test(h.year.value))||(puredigit.test(h.ksPwd.value))||(puredigit.test(h.ksEmail.value))){alert("不要输入全角字符,请把您的输入法换成半角模式。");return 0}puredigit=new RegExp("[^\u4e00-\u9fa5]");if(!h.onlyOne.checked){if(puredigit.test(h.ksXing.value)){alert("中文姓请输入中文.");h.ksXing.focus();return 0}if(puredigit.test(h.ksMing.value)){alert("中文名请输入中文.");h.ksMing.focus();return 0}if(h.ksXing.value==""){alert('请输入中文姓，如果您只有姓或名，请选中"我只有姓或名"');h.ksXing.focus();return 0}if(h.ksMing.value==""){alert('请输入中文名，如果您只有姓或名，请选中"我只有姓或名"');h.ksMing.focus();return 0}if(h.ksXing.value.indexOf(h.ksMing.value)>=0||h.ksMing.value.indexOf(h.ksXing.value)>=0){if(!confirm("输入的中文姓或中文名可能有误，不要在中文名中输入完整姓名，例如姓名为王小刚则应该分别输入王和小刚,请检查!\n点击【确定】忽略错误提示并提交.\n点击【取消】重新填写.")){h.ksXing.focus();return 0}}}else{if(h.ksXing.value!=""&&h.ksMing.value!=""){alert('请确保您只有姓或名，若不是，请不要选择"我只有姓或名"');h.onlyOne.focus();return 0}if((h.ksXing.value!="")&&(puredigit.test(h.ksXing.value))){alert("中文姓请输入中文或不输入.");h.ksXing.focus();return 0}if((h.ksMing.value!="")&&(puredigit.test(h.ksMing.value))){alert("中文名请输入中文或不输入.");h.ksMing.focus();return 0}if((h.ksXing.value=="")&&(h.ksMing.value=="")){alert("请输入中文姓或中文名.");h.ksXing.focus();return 0}}puredigit=new RegExp("[^A-Za-z]");if(!h.onlyOne.checked){if((h.ksPXing.value=="")||(puredigit.test(h.ksPXing.value.trim()))){alert("拼音姓请输入字母并不要输入空格.");h.ksPXing.focus();return 0}if((h.ksPMing.value=="")||(puredigit.test(h.ksPMing.value.trim()))){alert("拼音名请输入字母并不要输入空格.");h.ksPMing.focus();return 0}}else{if((h.ksPXing.value!="")&&(puredigit.test(h.ksPXing.value.trim()))){alert("拼音姓请输入字母或不输入并不要输入空格.");h.ksPXing.focus();return 0}if((h.ksPMing.value!="")&&(puredigit.test(h.ksPMing.value.trim()))){alert("拼音名请输入字母或不输入并不要输入空格.");h.ksPMing.focus();return 0}if((h.ksPXing.value=="")&&(h.ksPMing.value=="")){alert("请输入拼音姓或拼音名.");h.ksPXing.focus();return 0}}if(!((h.ksXB[0].checked)||(h.ksXB[1].checked))){alert("请输入性别.");h.ksXB[0].focus();return 0}if(h.year.value==""){alert("请输入出生年份.");h.year.focus();return 0}if(h.year.value!=""){puredigit=new RegExp("[^0-9]");if(puredigit.test(h.year.value)){alert("出生年份请输入数字.");h.year.focus();return 0}}else{alert("出生年份请输入数字.");h.year.focus();return 0}var e=h.year.value;if((parseInt(e,10)<1900)||(parseInt(e,10)>2020)){alert("出生年份输入错误.");h.year.focus();return 0}if(!checkIsValidDate(h.ksCsrq.value)){alert("请输入正确的出生日期.");h.year.focus();return 0}if(h.ksIDType.value==""){alert("请选择证件类型.");return 0}var g=false;for(var f=h.ksIDType.length-1;f>=0;--f){if(h.ksIDType[f].checked){g=true;break}}if(!g){alert("请选择您的证件类型.");h.ksIDType[0].focus();return 0}if(h.ksIDNO.value==""){alert("请输入证件号.");h.ksIDNO.focus();return 0}if((h.ksIDNO.value.length<6)||(h.ksIDNO.value.length>18)){alert("证件号长度应在6至18位之间.");h.ksIDNO.focus();return 0}if(checkXSSInput(h.ksIDNO.value)){alert("请输入正确的证件号.");h.ksIDNO.focus();return 0}if(h.ksIDType[0].checked){Retsfz=isbirthdayok(h);if(Retsfz!=""){alert("身份证的出生日期和实际填写的出生日期不符："+Retsfz+",请检查!");h.ksIDNO.focus();return 0}Retsfz=issfzok(h.ksIDNO.value,h.ksXB.value);if(Retsfz!=""){alert("身份证检查如下错误:\n  "+Retsfz);h.ksIDNO.focus();return 0}}else{if(h.ksIDType[3].checked){if(h.ksIDNO.value.substr(0,6)!="810000"&&h.ksIDNO.value.substr(0,6)!="820000"){alert("港澳居民居住证不正确.");h.ksIDNO.focus();return 0}Retsfz=isbirthdayok(h);if(Retsfz!=""){alert("港澳居民居住证的出生日期和实际填写的出生日期不符："+Retsfz+",请检查!");h.ksIDNO.focus();return 0}Retsfz=issfzok(h.ksIDNO.value,h.ksXB.value);if(Retsfz!=""){alert("港澳居民居住证检查如下错误:\n  "+Retsfz);h.ksIDNO.focus();return 0}}else{if(h.ksIDType[5].checked){if(h.ksIDNO.value.substr(0,6)!="830000"){alert("台湾居民居住证不正确.");h.ksIDNO.focus();return 0}Retsfz=isbirthdayok(h);if(Retsfz!=""){alert("台湾居民居住证的出生日期和实际填写的出生日期不符："+Retsfz+",请检查!");h.ksIDNO.focus();return 0}Retsfz=issfzok(h.ksIDNO.value,h.ksXB.value);if(Retsfz!=""){alert("台湾居民居住证检查如下错误:\n  "+Retsfz);h.ksIDNO.focus();return 0}}else{if(h.ksIDType[7].checked){if(h.ksIDNO.value.length!=15){alert("外国人永久居留身份证不正确.");h.ksIDNO.focus();return 0}puredigit=new RegExp("[a-zA-Z]{3}[0-9]{12}");if(!puredigit.test(h.ksIDNO.value)){alert("外国人永久居留身份证不正确.");h.ksIDNO.focus();return 0}}else{Retsfz=issfzok(h.ksIDNO.value,h.ksXB.value);if(Retsfz==""){alert("您填写的号码为身份证，请选择证件类型为中华人民共和国居民身份证！");h.ksIDNO.focus();return 0}}}}}if(h.ksPwd.value==""){alert("请输入密码.");h.ksPwd.focus();return 0}if(h.reformpwd.value==""){alert("请确认密码.");h.reformpwd.focus();return 0}if((h.ksPwd.value.length<8)||(h.ksPwd.value.length>20)){alert("密码长度至少8位，最多20位.");h.ksPwd.focus();return 0}if(h.ksPwd.value!=h.reformpwd.value){alert("请确认您两次输入的密码一致.");h.ksPwd.focus();return 0}if(/[ `\\\\]/.test(h.ksPwd.value)){alert("密码不符合要求.");h.ksPwd.focus();return 0}if(checkPasswordLevel(h.ksPwd.value)){alert("密码不符合要求.");h.ksPwd.focus();return 0}if(h.userqh.value==""){alert("请输入区号.");h.userqh.focus();return 0}if(h.usertel.value==""){alert("请输入电话号码.");h.usertel.focus();return 0}puredigit=new RegExp("[^0-9]");if(puredigit.test(h.userqh.value)){alert("区号请输入数字.");h.userqh.focus();return 0}if(h.userqh.value.length>4){alert("区号长度应小于5位.");h.userqh.focus();return 0}puredigit=new RegExp("[^0-9]");if(puredigit.test(h.usertel.value)){alert("电话号码请输入数字.");h.usertel.focus();return 0}h.ksTel.value=h.userqh.value+"-"+h.usertel.value;puredigit=new RegExp("[^0-9]");if(h.ksMobile.value==""||puredigit.test(h.ksMobile.value)){alert("手机号码请输入数字.");h.ksMobile.focus();return 0}if(h.ksMobile.value.length!=11){alert("请输入11位手机号码.");h.ksMobile.focus();return 0}if(h.ksMobile.value.substr(0,1)!="1"){alert("手机号码不正确.");h.ksMobile.focus();return 0}if(h.ksEmail.value==""){alert("电子邮箱地址不能为空，请重新输入.");h.ksEmail.focus();return 0}if(!checkEmail(h.ksEmail.value)||h.ksEmail.value.indexOf("*")!=-1){alert("电子邮箱地址输入错误，请重新输入.");h.ksEmail.focus();return 0}if(h.ksAddress.value==""){alert("通讯地址不能为空，请重新输入.");h.ksAddress.focus();return 0}if(countLength(h.ksAddress.value)>128){alert("通讯地址过长.");h.ksAddress.focus();return false}if(h.ksAddress.value!=""&&checkXSSInput(h.ksAddress.value)){alert("请输入正确的通讯地址.");h.ksAddress.focus();return 0}if(h.ksPostcode.value==""){alert("邮编不能为空，请重新输入.");h.ksPostcode.focus();return 0}puredigit=new RegExp("[^0-9]");if(h.ksPostcode.value!=""&&puredigit.test(h.ksPostcode.value)){alert("邮编请输入数字.");h.ksPostcode.focus();return 0}if(h.ksPostcode.value.length!=6){alert("邮编请输入6位数字.");h.ksPostcode.focus();return 0}if(h.wishjb.value==""){alert("请输入您的报考意向:考试级别");h.wishjb.focus();return 0}if(h.wishProvince.value==""){alert("请输入您的报考意向:考点所在的省份");h.selectProvince.focus();return 0}if(h.wishCity.value==""){alert("请输入您的报考意向:考点所在的城市");h.selectCity.focus();return 0}if(h.ksJzProvince.value==""){alert("请输入您的报考意向:现居住省份");h.selectJzProvince.focus();return 0}if(h.ksJzCity.value==""){alert("请输入您的报考意向:现居住城市");h.selectJzCity.focus();return 0}return 1}function regeditClick(a){if(checkCreateProfileInfo(a)==0){return}if(!checkMobileVerifyCode(a.mobileVerifyCode.value)){alert("请填写正确的短信验证码.");a.mobileVerifyCode.focus();return}if(!a.guarantee.checked){alert("您必须保证信息的真实和准确.");a.guarantee.focus();return false}if(confirm(getAllMSG(a))){a.ksPXing.value=a.ksPXing.value.trim();a.ksPMing.value=a.ksPMing.value.trim();a.ksIDNO.value=a.ksIDNO.value.replace("(","（");a.ksIDNO.value=a.ksIDNO.value.replace(")","）");return true}}function checkMobileVerifyCode(b){if(b==""){return false}else{if(b.length!=6){return false}else{var a=/^[0-9]+$/;return a.test(b)}}return true}function checkIsValidDate(h){if(h==""){return false}var e=/^((\d{4})|(\d{2}))-(\d{1,2})-(\d{1,2})$/;if((e.exec(h))==null){return false}var g=h.split("-");if(parseInt(g[0],10)<100){g[0]=2000+parseInt(g[0],10)+""}var f=new Date(g[0],(parseInt(g[1],10)-1)+"",g[2]);if((f.getFullYear()==parseInt(g[0],10))&&(f.getMonth()==(parseInt(g[1],10)-1))&&(f.getDate()==(parseInt(g[2],10)))){return true}else{return false}}function checkEmail(d){var c=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;return c.exec(d)}function issfzok(o,m){var p="11,12,13,14,15,21,22,23,31,32,33,34,35,36,37,41,42,43,44,45,46,50,51,52,53,54,61,62,63,64,65,71,81,82,83,91,";var q=0;var n="";var k="";if(o.length==15){k=o.substr(0,6)+"19"+o.substr(6,9)+"0"}else{if(o.length==18){k=o}else{return"身份证位数不对."}}xb=Number(k.substr(16,1))%2;if((m=="女"&&xb==1)||(m=="男"&&xb==0)){return"身份证和性别不符."}if(!/^\d{17}(\d|x)$/i.test(k)){return"身份证中有非法字符."}k=k.replace(/x$/i,"a");if(p.indexOf(k.substr(0,2))==-1){return"非法地区."}sBirthday=k.substr(6,4)+"-"+Number(k.substr(10,2))+"-"+Number(k.substr(12,2));var l=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=(l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate())){return"身份证错误：非法生日."}if(o.length==18){for(var d=17;d>=0;d--){q+=(Math.pow(2,d)%11)*parseInt(k.charAt(17-d),11)}if(q%11!=1){return"校验错误."}}return""}function isbirthdayok(b){if(b.ksIDNO.value.length==15){s=b.ksIDNO.value.substr(0,6)+"19"+b.ksIDNO.value.substr(6,9)+"0"}else{s=b.ksIDNO.value}months=b.month.value;days=b.day.value;if(months.length<2){months="0"+months}if(days.length<2){days="0"+days}if(s.substr(6,4)!=b.year.value){return"年份不符"}else{if(s.substr(10,2)!=months){return"月份不符"}else{if(s.substr(12,2)!=days){return"日期不符"}else{return""}}}}function getAllMSG(d){var c;c="**************************************************************\n";c+="    中文姓名:    "+d.ksXing.value+d.ksMing.value+"\n";c+="    拼音姓名:    "+d.ksPXing.value+"    "+d.ksPMing.value+"    *(请仔细核对姓名)\n";for(i=0;i<d.ksXB.length;i++){if(d.ksXB[i].checked){c+="    性       别:    "+d.ksXB[i].value+"\n"}}for(j=0;j<d.ksIDType.length;j++){if(d.ksIDType[j].checked){if(j==0){c+="    证件类型:    中华人民共和国居民身份证\n"}else{if(j==1){c+="    证件类型:    香港身份证\n"}else{if(j==2){c+="    证件类型:    澳门身份证\n"}else{if(j==3){c+="    证件类型:    港澳居民居住证\n"}else{if(j==4){c+="    证件类型:    台湾居民往来大陆通行证\n"}else{if(j==5){c+="    证件类型:    台湾居民居住证\n"}else{if(j==6){c+="    证件类型:    护照\n"}}}}}}}}}c+="    证  件 号:    "+d.ksIDNO.value.toUpperCase()+"    *(作为登录ID)\n";c+="    出生日期:    "+d.ksCsrq.value+"\n";c+="    电话号码:    "+d.ksTel.value+"\n";c+="    手机号码:    "+d.ksMobile.value+"\n";if(d.ksEmail.value!=""){c+="    电子邮箱地址:    "+d.ksEmail.value+"\n"}c+="    首选考试级别:    "+LevelName[d.wishjb.value]+"\n";c+="    首选考点城市:    "+d.wishProvince.value+"-"+d.wishCity.value+"\n";c+="    现居住城市：     "+d.ksJzProvince.value+"-"+d.ksJzCity.value+"\n";c+="**************************************************************\n\n";c+="以上是您填写的注册信息.\n请仔细核对,确认无误后,点击【确定】提交,点击【取消】修改.\n";return c};